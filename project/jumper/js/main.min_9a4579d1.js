var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))(function(s,r){function l(t){try{o(a.next(t))}catch(e){r(e)}}function h(t){try{o(a["throw"](t))}catch(e){r(e)}}function o(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(l,h)}o((a=a.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return a([t,e])}}function a(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,r&&(l=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(l=l.call(r,i[1])).done)return l;switch(r=0,l&&(i=[0,l.value]),i[0]){case 0:case 1:l=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!l||i[1]>l[0]&&i[1]<l[3])){o.label=i[1];break}if(6===i[0]&&o.label<l[1]){o.label=l[1],l=i;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(i);break}l[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(a){i=[6,a],r=0}finally{s=l=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,r,l,h,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return h={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},map=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this)||this;return i.checkNum=1,i.plates=[],i.floors=[],i.props=[],i.checkset(e),i}return __extends(e,t),e.prototype.checkset=function(t){this.checkNum=t,this.myurlloader=new egret.URLLoader;var e=new egret.URLRequest;e.url="resource/check.json",this.myurlloader.load(e),this.myurlloader.addEventListener(egret.Event.COMPLETE,this.onComplete,this)},e.prototype.returnplateName=function(t){var e="plate";return t%=this.floors.length,e=e+this.plates[t].toString()+"_png"},e.prototype.returnfloorName=function(t){var e="floor";return t%=this.floors.length,e=e+this.floors[t].toString()+"_png"},e.prototype.onComplete=function(t){var e=t.target.data;JSON.parse(e)},e.prototype.reset=function(t){this.removeChildren(),this.plates=[],this.floors=[],this.props=[],this.checkNum=t;for(var e=this.myurlloader.data,i=JSON.parse(e),a=!1,s=0;s<i.length-1;s++)if(i[s].check!="#"+this.checkNum.toString()){if(i[s].check=="*"+this.checkNum.toString()){a=!1;break}if(a){var r=new plate(i[s].plate_left1,i[s].plate_right1,i[s].plate_left2,i[s].plate_right2);this.plates.push(r);var l=new floor(i[s].floor);this.floors.push(l),this.addChild(r),this.addChild(l),r.y=1300-125*Number(i[s].check),l.y=1425-125*Number(i[s].check);var h=new prop(i[s].prop);this.props.push(h),this.addChild(h),h.x=h.myx,h.y=1365-125*Number(i[s].check)}}else a=!0},e}(egret.Sprite);__reflect(map.prototype,"map");var ball=function(t){function e(){var e=t.call(this)||this;e.ballskin="ballskin1",e.ballspeedx=20,e.ballcurv=1,e.ballcury=0,e.grivity=5,e.ifhitGround=!0,e.moveEnable=!1,e.jumpsound=new egret.Sound,e.jumpsound=RES.getRes("jump_mp3"),e.ballcurv=1,e.ballcury=0,null!=egret.localStorage.getItem("ballskin")&&(e.ballskin=egret.localStorage.getItem("ballskin")),e.moveEnable=!0;var i=RES.getRes(e.ballskin+"_json"),a=RES.getRes(e.ballskin+"_png");return e.mcFactory=new egret.MovieClipDataFactory(i,a),e.ballMc=new egret.MovieClip(e.mcFactory.generateMovieClipData("Clockwise")),e.addChild(e.ballMc),e.ballMc.play(-1),e.moveEnable=!0,e}return __extends(e,t),e}(egret.Sprite);__reflect(ball.prototype,"ball");var floor=function(t){function e(e){var i=t.call(this)||this;i.leftxs=[],i.rightxs=[],i.types=[],i.blocks=[];for(var a=e.split("|"),s=0;s<a.length;s++){var r=a[s].split(":");i.leftxs[s]=Number(r[0]),i.rightxs[s]=Number(r[1]),i.types[s]=Number(r[2])}return i.buildfloor(),i}return __extends(e,t),e.prototype.buildfloor=function(){for(var t=0;t<this.leftxs.length;t++)for(var e=0;20*e<=this.rightxs[t]-this.leftxs[t]-20;e++){var i=new egret.Bitmap;1==this.types[t]?i.texture=RES.getRes("floor_png"):i.texture=RES.getRes("floorDisappear_png"),this.addChild(i),this.blocks.push(i),i.x=this.leftxs[t]+20*e}},e}(egret.Sprite);__reflect(floor.prototype,"floor");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.Cmtime=0,e.score=0,e.nowlay=0,e.HighestScore=0,e.nowCheck=1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),this.startAnimation(t),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.HighestScore=Number(egret.localStorage.getItem("highestscore")),this.sprite0=new egret.Sprite,this.sprite1=new egret.Sprite,this.sprite2=new egret.Sprite,this.ballskinsprite=new egret.Sprite,this.stage.addChild(this.sprite0),this.stage.addChild(this.sprite1),this.stage.addChild(this.sprite2),this.stage.addChild(this.ballskinsprite),this.gotosprite0()},e.prototype.gotosprite0=function(){this.sprite0.removeChildren(),this.sprite1.removeChildren(),this.sprite2.removeChildren(),this.ballskinsprite.removeChildren();var t=this.createBitmapByName("bg_jpg");this.sprite0.addChild(t);var e=this.createBitmapByName("bt_png");this.sprite0.addChild(e),e.x=250,e.y=1300,e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotosprite1,this);var i=new egret.TextField;i.text="最高分："+this.HighestScore.toString(),i.size=100,this.sprite0.addChild(i);var a=this.createBitmapByName("skinbtn_png");a.touchEnabled=!0,this.sprite0.addChild(a),a.y=1500,a.x=400,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoskinsprite,this),this.mymap=new map(this.nowCheck)},e.prototype.gotosprite1=function(){this.mymap.reset(this.nowCheck),this.mymap.x=0,this.mymap.y=0,this.score=0,this.nowlay=0,this.rockettime=!1,this.sprite0.removeChildren(),this.sprite1.removeChildren(),this.sprite2.removeChildren(),this.ballskinsprite.removeChildren(),this.mybg=new bg("mybg_jpg"),this.mytail=new tail,this.sprite1.addChild(this.mybg),this.sprite1.addChild(this.mymap),this.mymap.addChild(this.mytail),this.myball=new ball,this.mymap.addChild(this.myball),this.myball.x=515,this.myball.y=1375,this.sprite1.touchEnabled=!0,this.sprite1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jump,this),this.scoret=new egret.TextField,this.scoret.size=100,this.sprite1.addChild(this.scoret),this.nowlayt=new egret.TextField,this.nowlayt.size=100,this.nowlayt.y=300,this.sprite1.addChild(this.nowlayt),this.ifhitgt=new egret.TextField,this.ifhitgt.size=80,this.ifhitgt.y=500,this.sprite1.addChild(this.ifhitgt),this.testT=new egret.TextField,this.testT.size=80,this.testT.x=500,this.sprite1.addChild(this.testT),this.sprite1.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},e.prototype.onEnterFrame=function(t){this.myball.moveEnable&&(this.verticalMove(),this.horizontalMove(),this.mytail.run(this.myball.x,this.myball.y)),this.nowlayt.text="nowlay:"+this.nowlay.toString(),this.scoret.text="score:"+this.score.toString(),this.ifhitgt.text="ifonground:"+this.myball.ifhitGround.toString()+"\nspeedy:"+this.myball.ballcury,this.testT.text="timer:"+(this.mybg.timer/30).toString()+"\ncolnow：\n"+this.mybg.colnow.toString()+"\ntarcol\n"+this.mybg.colortarNum.toString(),this.score<=this.nowlay&&(this.score=this.nowlay)},e.prototype.verticalMove=function(){this.myball.y+this.mymap.y<862&&(this.mymap.y+=.05*Math.abs(862-this.myball.y-this.mymap.y)),Number(((1375-this.myball.y)/125).toFixed(0))<this.mymap.plates.length&&Number(((1375-this.myball.y)/125).toFixed(0))>=0&&(this.nowlay=Number(((1375-this.myball.y)/125).toFixed(0))),this.ifonground(),this.myball.ballcury>=0&&this.nowlay==this.mymap.plates.length-1&&(console.log(this.nowCheck),this.nowCheck++,this.sprite1.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.gotosprite1()),this.rockettime?Math.abs(this.myball.y-this.destinationy)>10?(this.myball.x+=(this.destinationx-this.myball.x)/5,this.myball.y+=(this.destinationy-this.myball.y)/5,this.myball.y+this.mymap.y!=867&&(this.mymap.y+=867-this.myball.y-this.mymap.y)):this.rockettime=!1:this.myball.ifhitGround&&this.myball.ballcury>=0?(this.myball.y=this.mymap.floors[this.nowlay].y-50,this.myball.ballcury=0):(this.myball.ballcury<25&&(this.myball.ballcury+=this.myball.grivity),this.myball.y+=this.myball.ballcury)},e.prototype.horizontalMove=function(){0==this.hitplate()[0]||this.rockettime||(this.myball.ballcurv=-this.myball.ballcurv,1==this.myball.ballcurv?(this.myball.ballMc.movieClipData=this.myball.mcFactory.generateMovieClipData("Clockwise"),this.myball.ballMc.play(-1)):(this.myball.ballMc.movieClipData=this.myball.mcFactory.generateMovieClipData("Anticlockwise"),this.myball.ballMc.play(-1))),1==this.hitprop()?this.rockettime=!0:2==this.hitprop()&&(this.ifChorizentalmove=!0),(this.myball.x+this.mymap.x>1080||this.myball.x+this.mymap.x<0)&&(this.sprite1.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.Die()),this.rockettime||(this.myball.x+=this.myball.ballcurv*this.myball.ballspeedx),this.ifChorizentalmove&&(this.CmSpeed>0?this.mymap.x+this.myball.x>300&&(this.mymap.x-=.15*Math.abs(300-this.myball.x-this.mymap.x)):this.CmSpeed<0&&this.mymap.x+this.myball.x<700&&(this.mymap.x+=.15*Math.abs(700-this.myball.x-this.mymap.x)),this.Cmtime>0?(this.mymap.x-=this.CmSpeed,this.Cmtime-=1e3/30):this.ifChorizentalmove=!1)},e.prototype.jump=function(){this.myball.ifhitGround&&!this.rockettime&&(this.myball.ballcury=-40,this.myball.jumpsound.play(0,1))},e.prototype.hitplate=function(){for(var t=[0,0],e=0;e<this.mymap.plates[this.nowlay].platea.length;e++)this.mymap.plates[this.nowlay].platea[e].hitTestPoint(this.myball.x+this.mymap.x,this.myball.y+this.mymap.y+this.myball.ballMc.height/2,!0)?(t[0]=1,t[1]=e):this.mymap.plates[this.nowlay].platea[e].hitTestPoint(this.myball.x+this.myball.ballMc.width+this.mymap.x,this.myball.y+this.mymap.y+this.myball.ballMc.height/2,!0)&&(t[0]=2,t[1]=e);if(0==t[1]&&0!=t[0]){if(0==this.mymap.plates[this.nowlay].left1_attribute&&(this.mymap.plates[this.nowlay].platea[t[1]].texture=null),2==this.mymap.plates[this.nowlay].left1_attribute){var i=egret.Tween.get(this.mymap.plates[this.nowlay].platea[t[1]]),a=this.mymap.plates[this.nowlay].platea[t[1]].x;if(i.to({x:-200},1e3),this.nowlay+2<this.mymap.plates.length&&(console.log(this.mymap.plates[this.nowlay+2].platea[t[1]]),null==this.mymap.plates[this.nowlay+2].platea[t[1]].texture)){this.mymap.plates[this.nowlay+2].platea[t[1]].texture=RES.getRes("edgeball_png"),this.mymap.plates[this.nowlay+2].left1_attribute=2,this.mymap.plates[this.nowlay+2].platea[t[1]].x=-100;var s=egret.Tween.get(this.mymap.plates[this.nowlay+2].platea[t[1]]);s.to({x:a},1e3)}}}else if(1==t[1]&&0!=t[0]){if(0==this.mymap.plates[this.nowlay].right1_attribute&&(this.mymap.plates[this.nowlay].platea[t[1]].texture=null),2==this.mymap.plates[this.nowlay].right1_attribute){var i=egret.Tween.get(this.mymap.plates[this.nowlay].platea[t[1]]),a=this.mymap.plates[this.nowlay].platea[t[1]].x;if(i.to({x:1280},1e3),this.nowlay+2<this.mymap.plates.length&&null==this.mymap.plates[this.nowlay+2].platea[t[1]].texture){this.mymap.plates[this.nowlay+2].platea[t[1]].texture=RES.getRes("edgeball_png"),this.mymap.plates[this.nowlay+2].right1_attribute=2,this.mymap.plates[this.nowlay+2].platea[t[1]].x=1080;var s=egret.Tween.get(this.mymap.plates[this.nowlay+2].platea[t[1]]);s.to({x:a},1e3)}}}else if(2==t[1]&&0!=t[0]){if(0==this.mymap.plates[this.nowlay].left2_attribute&&(this.mymap.plates[this.nowlay].platea[t[1]].texture=null),2==this.mymap.plates[this.nowlay].left2_attribute){var i=egret.Tween.get(this.mymap.plates[this.nowlay].platea[t[1]]);if(i.to({x:-150},1e3),this.nowlay+2<this.mymap.plates.length&&null==this.mymap.plates[this.nowlay+2].platea[t[1]].texture){this.mymap.plates[this.nowlay+2].platea[t[1]].texture=RES.getRes("edgeball_png"),this.mymap.plates[this.nowlay+2].left2_attribute=2,this.mymap.plates[this.nowlay+2].platea[t[1]].x=-150;var s=egret.Tween.get(this.mymap.plates[this.nowlay+2].platea[t[1]]);s.to({x:a},1e3)}}}else if(3==t[1]&&0!=t[0]&&(0==this.mymap.plates[this.nowlay].right2_attribute&&(this.mymap.plates[this.nowlay].platea[t[1]].texture=null),2==this.mymap.plates[this.nowlay].right2_attribute)){var i=egret.Tween.get(this.mymap.plates[this.nowlay].platea[t[1]]),a=this.mymap.plates[this.nowlay].platea[t[1]].x;if(i.to({x:1180},1e3),this.nowlay+2<this.mymap.plates.length&&null==this.mymap.plates[this.nowlay+2].platea[t[1]].texture){this.mymap.plates[this.nowlay+2].platea[t[1]].texture=RES.getRes("edgeball_png"),this.mymap.plates[this.nowlay+2].right2_attribute=2,this.mymap.plates[this.nowlay+2].platea[t[1]].x=1080;var s=egret.Tween.get(this.mymap.plates[this.nowlay+2].platea[t[1]]);s.to({x:a},1e3)}}return t},e.prototype.hitprop=function(){for(var t=0,e=0;e<this.mymap.props.length;e++){if(1==this.mymap.props[e].type&&this.mymap.props[e].hitTestPoint(this.myball.x+this.myball.ballMc.width/2+this.mymap.x,this.myball.y+this.myball.ballMc.height/2+this.mymap.y,!0)){this.mymap.props[e].hitprop(),t=1,this.destinationx=this.mymap.props[e].attribute1,this.destinationy=1365-125*this.mymap.props[e].attribute2-20,this.mymap.props[e].attribute1>this.mymap.props[e].myx?this.myball.ballcurv=1:this.mymap.props[e].attribute1<this.mymap.props[e].myx&&(this.myball.ballcurv=-1);break}2==this.mymap.props[e].type&&this.mymap.props[e].hitTestPoint(this.myball.x+this.myball.ballMc.width/2+this.mymap.x,this.myball.y+this.myball.ballMc.height/2+this.mymap.y)&&(t=2,this.Cmtime=this.mymap.props[e].attribute1,this.CmSpeed=this.mymap.props[e].attribute2)}return t},e.prototype.ifonground=function(){for(var t=!1,e=0;e<this.mymap.floors.length;e++)if(this.mymap.floors[e].hitTestPoint(this.myball.x+this.myball.ballMc.width/2+this.mymap.x,this.myball.y+this.myball.ballMc.height+this.mymap.y,!0)){t=!0;for(var i=0;i<this.mymap.floors[e].leftxs.length;i++)if(this.myball.x+this.myball.ballMc.width/2>this.mymap.floors[e].leftxs[i]&&this.myball.x+this.myball.ballMc.width/2<this.mymap.floors[e].rightxs[i]){for(var a=0,s=0;i>s;s++)a+=this.mymap.floors[e].rightxs[s]-this.mymap.floors[e].leftxs[s];var r=Number(((this.myball.x+this.myball.ballMc.width/2-this.mymap.floors[e].leftxs[i]+a)/20-1).toFixed(0));0==this.mymap.floors[e].types[i]&&this.myball.ballcury>=0&&(this.mymap.floors[e].blocks[r].texture=null)}}this.myball.ifhitGround=t},e.prototype.Die=function(){this.score>this.HighestScore&&egret.localStorage.setItem("highestscore",this.score.toString()),this.sprite1.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.sprite1.removeChildren(),this.mytail.reset();var t=this.createBitmapByName("bg_jpg");this.sprite2.addChild(t);var e=this.createBitmapByName("cw_png");this.sprite2.addChild(e),e.touchEnabled=!0,e.x=300,e.y=1300,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotosprite1,this);var i=this.createBitmapByName("returnbtn_png");this.sprite2.addChild(i),i.touchEnabled=!0,i.x=600,i.y=1300,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotosprite0,this)},e.prototype.gotoskinsprite=function(){this.sprite0.removeChildren(),this.sprite1.removeChildren(),this.sprite2.removeChildren();var t=this.createBitmapByName("bg_jpg");this.sprite2.addChild(t);var e=new skindis("ballskindis1_png",1);e.width=200,e.height=200;var i=new skindis("ballskindis2_png",2);i.width=200,i.height=200;var a=new egret.Sprite;a.addChild(e),a.addChild(i),i.x=250,this.ballskinsprite.addChild(a),a.x=300,a.y=1e3;var s=this.createBitmapByName("returnbtn_png");this.ballskinsprite.addChild(s),s.touchEnabled=!0,s.x=300,s.y=1300,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotosprite0,this)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){var e=this,i=new egret.HtmlTextParser,a=t.map(function(t){return i.parse(t)}),s=this.textfield,r=-1,l=function(){r++,r>=a.length&&(r=0);var t=a[r];s.textFlow=t;var i=egret.Tween.get(s);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(l,e)};l()},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var bg=function(t){function e(e){var i=t.call(this)||this;i.texture=RES.getRes(e),i.colnow=16777215,i.colorA=[16777215,16711680,65280,255,16776960,16711935,65535,65280];do i.colortarNum=Number((Math.random()*i.colorA.length).toFixed(0));while(i.colortarNum==i.colorA.length);return i.timer=0,i.duration=5e3,i.addEventListener(egret.Event.ENTER_FRAME,i.myupdate,i),i}return __extends(e,t),e.prototype.myupdate=function(){if(this.changecolor(this.colorA[this.colortarNum],this.duration),this.timer++,this.timer/30>=this.duration/1e3){this.timer=0;do this.colortarNum=Number((Math.random()*this.colorA.length).toFixed(0));while(this.colortarNum==this.colorA.length)}},e.prototype.changecolor=function(t,e){var i=function(t){var e={r:-1,g:-1,b:-1};return e.b=t%256,e.g=Math.floor(t/256)%256,e.r=Math.floor(t/256/256),e},a=function(t){return Math.floor(256*(256*t.r+t.g)+t.b)},s=i(t),r=i(this.colnow),l=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],h=Math.floor((s.r-r.r)/(30*this.duration/1e3)),o=Math.floor((s.g-r.g)/(30*this.duration/1e3)),n=Math.floor((s.b-r.b)/(30*this.duration/1e3));l[0]=(r.r+h)/255,l[6]=(r.g+o)/255,l[12]=(r.b+n)/255;var p=new egret.ColorMatrixFilter(l);r={r:r.r+h,g:r.g+o,b:r.b+n},this.filters=[p],this.colnow=a(r)},e.prototype.changecolorSoon=function(t){var e=function(t){var e={r:-1,g:-1,b:-1};return e.b=t%256,e.g=Math.floor(t/256)%256,e.r=Math.floor(t/256/256),e},i=function(t){return Math.floor(256*(256*t.r+t.g)+t.b)},a=e(t),s=e(this.colnow),r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];r[0]=a.r/255,r[6]=a.g/255,r[12]=a.b/255;var l=new egret.ColorMatrixFilter(r);s={r:a.r,g:a.g,b:a.b},this.filters=[l],this.colnow=i(s)},e}(egret.Bitmap);__reflect(bg.prototype,"bg");var plate=function(t){function e(e,i,a,s){var r=t.call(this)||this;r.left1_attribute=1,r.right1_attribute=1;var l=e.split("|"),h=i.split("|");if(r.left1_x=Number(l[0]),r.left1_attribute=Number(l[1]),r.right1_x=Number(h[0]),r.right1_attribute=Number(h[1]),""!=a){var o=a.split("|");r.left2_x=Number(o[0]),r.left2_attribute=Number(o[1])}if(""!=s){var n=s.split("|");r.right2_x=Number(n[0]),r.right2_attribute=Number(n[1])}return r.platea=[],r.buildplate(),r}return __extends(e,t),e.prototype.buildplate=function(){var t=new egret.Bitmap;1==this.left1_attribute?t.texture=RES.getRes("plate_png"):0==this.left1_attribute?t.texture=RES.getRes("plateDisappear_png"):2==this.left1_attribute&&(t.texture=RES.getRes("edgeball_png")),this.addChild(t),this.platea.push(t),t.x=this.left1_x;var e=new egret.Bitmap;1==this.right1_attribute?e.texture=RES.getRes("plate_png"):0==this.right1_attribute?e.texture=RES.getRes("plateDisappear_png"):2==this.right1_attribute&&(e.texture=RES.getRes("edgeball_png")),this.addChild(e),this.platea.push(e),e.x=this.right1_x-25;var i=new egret.Bitmap;1==this.left2_attribute?i.texture=RES.getRes("plate_png"):0==this.left2_attribute?i.texture=RES.getRes("plateDisappear_png"):2==this.left2_attribute&&(i.texture=RES.getRes("edgeball_png")),this.addChild(i),this.platea.push(i),i.x=this.left2_x;var a=new egret.Bitmap;1==this.right2_attribute?a.texture=RES.getRes("plate_png"):0==this.right2_attribute?a.texture=RES.getRes("plateDisappear_png"):2==this.right2_attribute&&(a.texture=RES.getRes("edgeball_png")),this.addChild(a),this.platea.push(a),a.x=this.right2_x-25},e}(egret.Sprite);__reflect(plate.prototype,"plate");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var prop=function(t){function e(e){var i=t.call(this)||this;if(i.attribute2=20,""!=e){var a=e.split("|");i.type=Number(a[0]),i.myx=Number(a[1]),i.attribute1=Number(a[2]),i.attribute2=Number(a[3]),1==i.type?i.texture=RES.getRes("rocket_png"):2==i.type&&(i.texture=RES.getRes("CMTrigger_png"))}return i}return __extends(e,t),e.prototype.hitprop=function(){this.texture=null},e}(egret.Bitmap);__reflect(prop.prototype,"prop");var skindis=function(t){function e(e,i){var a=t.call(this)||this;return a.skinnum=1,a.texture=RES.getRes(e),a.skinnum=i,a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,a.betouched,a),a.pointer=new egret.Bitmap,a.pointer.texture=RES.getRes("pointer_png"),a}return __extends(e,t),e.prototype.betouched=function(){egret.localStorage.setItem("ballskin","ballskin"+this.skinnum.toString())},e}(egret.Bitmap);__reflect(skindis.prototype,"skindis");var tail=function(t){function e(){var e=t.call(this)||this,i=RES.getRes("tail_json"),a=RES.getRes("tail_png"),s=new egret.MovieClipDataFactory(i,a);e.mca=new Array;for(var r=0;20>r;r++)e.mca[r]=new egret.MovieClip(s.generateMovieClipData("tail")),e.addChild(e.mca[r]),e.mca[r].x=-200;return e.indexnow=0,e}return __extends(e,t),e.prototype.run=function(t,e){this.mca[this.indexnow].x=t,this.mca[this.indexnow].y=e,this.mca[this.indexnow].gotoAndPlay("tailmc",1),this.indexnow++,this.indexnow=this.indexnow%this.mca.length},e.prototype.reset=function(){for(var t=0;20>t;t++)this.mca[t].x=-200},e}(egret.Sprite);__reflect(tail.prototype,"tail");